<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>安妮意大利餐厅（清华大学店）</title>
    <url>/%E5%9B%9E%E5%BF%86%E5%BD%95/%E7%BE%8E%E9%A3%9F%E5%9B%9E%E5%BF%86%E5%BD%95/%E5%AE%89%E5%A6%AE%E6%84%8F%E5%A4%A7%E5%88%A9%E9%A4%90%E5%8E%85%EF%BC%88%E6%B8%85%E5%8D%8E%E5%A4%A7%E5%AD%A6%E5%BA%97%EF%BC%89/</url>
    <content><![CDATA[<p>全新的企划！我打算记录每一个我喜欢也愿意去的餐厅，饮食体验和故事。</p>
<h3 id="安妮意大利餐厅清华大学店">安妮意大利餐厅（清华大学店）</h3>

<p><img src="/%E5%9B%9E%E5%BF%86%E5%BD%95/%E7%BE%8E%E9%A3%9F%E5%9B%9E%E5%BF%86%E5%BD%95/%E5%AE%89%E5%A6%AE%E6%84%8F%E5%A4%A7%E5%88%A9%E9%A4%90%E5%8E%85%EF%BC%88%E6%B8%85%E5%8D%8E%E5%A4%A7%E5%AD%A6%E5%BA%97%EF%BC%89/cover.jpg" alt="cover">
餐厅环境相当之好，因为害怕排队我5点钟就到了，结果完美避开了人流高峰，坐上了餐厅最后一个空位。服务员非常有礼貌，服务也很令人舒适，在等待友人到来的时间里也没有打扰不点餐的我。果然不到半个小时外面就排起长队了，推荐想去吃安妮的同学们也差不多在5点最好就到达。那么，上菜！</p>
<span id="more"></span>
<ul>
<li><p>餐前面包
好评在于装面包的盘子是热的，细节非常到位。刚出炉的面包松软酥脆，唯一的缺点可能是提供的黄油实在太少了。
<br></p></li>
<li><p>烟熏三文鱼  <img src="/%E5%9B%9E%E5%BF%86%E5%BD%95/%E7%BE%8E%E9%A3%9F%E5%9B%9E%E5%BF%86%E5%BD%95/%E5%AE%89%E5%A6%AE%E6%84%8F%E5%A4%A7%E5%88%A9%E9%A4%90%E5%8E%85%EF%BC%88%E6%B8%85%E5%8D%8E%E5%A4%A7%E5%AD%A6%E5%BA%97%EF%BC%89/sanwenyu.jpg" alt="sanwenyu">
我所认为的全场最佳，可惜友人并不吃海鲜。三文鱼肉质紧实有弹性，更接近于肉的质感而非普通生鱼片，调味恰到好处。可惜我自己柠檬挤多了一点。
<br></p></li>
<li><p>薯条
去码头整点薯条，刚出炉的酥脆的薯条能有什么错，偏甜的番茄酱也十分好评。谁不喜欢这种简单的快乐呢。友人说他在天津娜娜家吃过更好更便宜的，下次一定！
<br></p></li>
<li><p>奶油蘑菇汤
点餐时服务员问我要不要分开两个小碗装，我同意了。事实证明好像血亏，两个小碗也太小了啊喂，感觉少了一半的样子。蘑菇被完全打碎成小颗粒，但是可惜的是香味并没有那么浓郁，应该是品种的问题吧。
<br></p></li>
<li><p>玛格丽特/安妮双拼披萨
芝士就是力量！谁会不喜欢可以拉丝的芝士呢，饼皮柔软偏薄，虽然个人喜欢偏脆的饼皮，但是这个也不错了。吃到这里其实已经很饱了，但是接下来才是重点。
<br></p></li>
<li><p>意式肉酱千层面  <img src="/%E5%9B%9E%E5%BF%86%E5%BD%95/%E7%BE%8E%E9%A3%9F%E5%9B%9E%E5%BF%86%E5%BD%95/%E5%AE%89%E5%A6%AE%E6%84%8F%E5%A4%A7%E5%88%A9%E9%A4%90%E5%8E%85%EF%BC%88%E6%B8%85%E5%8D%8E%E5%A4%A7%E5%AD%A6%E5%BA%97%EF%BC%89/qiancengmian.jpg" alt="qiancengmian">
因为友人已经完全吃饱了，所以整份千层面几乎有我独占，建议大家千层面最好还是在很饿的时候吃。芝士的香气非常浓郁，但是对我来说肉酱的味道的深度有所欠缺，芝士盖过太多了。
ps：来自友人的评价，像是无垢巨人的呕吐物emmmmm <br></p></li>
<li><p>苹果派  <img src="/%E5%9B%9E%E5%BF%86%E5%BD%95/%E7%BE%8E%E9%A3%9F%E5%9B%9E%E5%BF%86%E5%BD%95/%E5%AE%89%E5%A6%AE%E6%84%8F%E5%A4%A7%E5%88%A9%E9%A4%90%E5%8E%85%EF%BC%88%E6%B8%85%E5%8D%8E%E5%A4%A7%E5%AD%A6%E5%BA%97%EF%BC%89/pingguopai.jpg" alt="pingguopai">
甜点的卖相真的相当不错，味道出乎意料的不是那种很甜的苹果，用的是富有苹果香气的酸一些的苹果，为了中和酸味，还配上了较甜的冰淇淋，冷热交替，<del>会拉肚子</del>相得益彰。相当不错的结尾。
<br></p></li>
</ul>
<p>总的来说非常棒的用餐体验，这次来主要其实是为了心心念念的加菲猫最爱的
Lasagna
但是最后稍微有些失望。和友人也有一个多月未见面了，吃的很开心！！</p>
<p>Bon appétit! 下次再见</p>
]]></content>
      <categories>
        <category>回忆录</category>
        <category>美食回忆录</category>
      </categories>
      <tags>
        <tag>美食</tag>
        <tag>碎碎念</tag>
      </tags>
  </entry>
  <entry>
    <title>project-PKU-VCL-2023-Final-Project</title>
    <url>/%E9%A1%B9%E7%9B%AE/project-pku-vcl-2023-final-project/</url>
    <content><![CDATA[<h1 id="pku-vcl-final-project">PKU-VCL Final Project</h1>
<p>这是 PKU
可视计算与交互的期末项目，具体实现了一个快速的弹簧系统的仿真，你可以在<a href="https://github.com/skytang2022/PKU-VCL-2023-Final-Project-Fast-Simulation-of-Mass-Spring-Systems">这里</a>找到源代码。</p>
<h2 id="introdution">1.Introdution</h2>
<h3 id="fast-simulation-of-mass-spring-systems">Fast Simulation of
Mass-Spring Systems</h3>

<p><img src="/%E9%A1%B9%E7%9B%AE/project-pku-vcl-2023-final-project/project-D-3.png" alt="explicit"> Lab 4
中我们实现了隐式弹簧质点的求解，其中每一帧都求解一个线性系统的开销是非常大的。在
SIGGRAPH 2013 上，作者提供了一种简单并有效的加速弹簧质点解算的<a href="https://tiantianliu.cn/papers/liu13fast/liu13fast.html">方法</a>：通过
local-global
的交替迭代并预分解矩阵，能够大大加速弹簧质点系统的解算。</p>
<span id="more"></span>
<h2 id="method">2.Method</h2>
<p>我们假设一个质点-弹簧系统在 3D 中具有 <span class="math inline">\(m\)</span> 个点，在具有恒定的时间步长 <span class="math inline">\(h\)</span> 的时间样本 <span class="math inline">\(t_{1},t_{2},...\)</span>下演化。在 <span class="math inline">\(t_{n}\)</span> 时刻的质点坐标为 <span class="math inline">\(\textbf{q}_{n}\in \mathbb{R}^{3m}\)</span>，速度为
<span class="math inline">\(\textbf{v}_{n}\in
\mathbb{R}^{3m}\)</span>。受力用一个非线性方程 <span class="math inline">\(\textbf{f}:\mathbb{R}^{3m}\to\mathbb{R}^{3m}\)</span>表示，因此
<span class="math inline">\(\textbf{f}(\textbf{q}_{n})\)</span> 是在时间
<span class="math inline">\(t_{n}\)</span>
时作用在所有粒子上的力的向量。我们假设力是保守的，即 <span class="math inline">\(\textbf{f}=-\nabla E\)</span>，其中 <span class="math inline">\(E:\mathbb{R}^{3m}\to\mathbb{R}^{m}\)</span>
是一个势函数。给定对角质量矩阵 <span class="math inline">\(\textbf{M}\in
\mathbb{R}^{3m\times3m}\)</span>，根据牛顿定律隐式欧拉规则会产生以下更新规则：
<span class="math display">\[\begin{align}
\textbf{q}_{n+1}=\textbf{q}_{n}+h\textbf{v}_{n+1}\\
\textbf{v}_{n+1}=\textbf{v}_{n}+h\textbf{M}^{-1}\textbf{f}(\textbf{q}_{n+1})\end{align}
\]</span> 将（1）代入（2）后可得： <span class="math display">\[\begin{align}
\textbf{q}_{n+1}-\textbf{q}_{n}-h\textbf{v}_{n}=h^2\textbf{M}^{-1}\textbf{f}(\textbf{q}_{n+1})
\end{align}
\]</span> 将 <span class="math inline">\(\textbf{f}\)</span>
拆分为与位置相关量和与位置无关量 <span class="math inline">\(\textbf{f}(\textbf{q}_{n})=\textbf{f}_{int}(\textbf{q}_{n})+\textbf{f}_{ext}\)</span>
设 <span class="math inline">\(\textbf{y}:=\textbf{q}_{n}+h\textbf{v}_{n}+h^2\textbf{M}^{-1}\textbf{f}_{ext}\)</span>
，<span class="math inline">\(\textbf{x}:=\textbf{q}_{n+1}\)</span>
。其中<span class="math inline">\(\textbf{y}\)</span> 为已知量，<span class="math inline">\(\textbf{x}\)</span> 为要求的量，方程可写作： <span class="math display">\[\begin{align}
\textbf{M}(\textbf{x}-\textbf{y})=h^2\textbf{f}(\textbf{x}) \end{align}
\]</span>方程（4）的解对应以下函数的临界点： <span class="math display">\[\begin{align}
g(\textbf{x})=\frac{1}{2}(\textbf{x}-\textbf{y})^T\textbf{M}(\textbf{x}-\textbf{y})+h^2E(\textbf{x})
\end{align}
\]</span> 因而原问题转化为最小化问题： <span class="math inline">\(\min_{\textbf{x}}g(\textbf{x})\)</span></p>
<p>文章中技术的主要思想是以一种允许我们采用块坐标下降法（block
coordinate descent method）重新表述能量势 <span class="math inline">\(E\)</span>。而 <span class="math inline">\(E\)</span> 的关键组成部分是弹簧势。
根据胡克定律，弹簧势定义为： <span class="math display">\[\begin{align}
\frac{1}{2}k(\left\|  \textbf{p}_1-\textbf{p}_2 \right\|-r)^2
\end{align}
\]</span>其中 <span class="math inline">\(\textbf{p}_1,\textbf{p}_2\in\mathbb{R}^3\)</span>
为弹簧端点位置，<span class="math inline">\(r\ge0\)</span> 为原长，<span class="math inline">\(k\ge0\)</span>
为劲度系数。重新表述的关键在于将胡克定律重新表述为最小化问题（证明省略）：
<span class="math display">\[\begin{align}
(\left\|  \textbf{p}_1-\textbf{p}_2 \right\|-r)^2=\underset{\left\|
\textbf{d}
\right\|=r}{\min}\left\|  \textbf{p}_1-\textbf{p}_2-\textbf{d}
\right\|^2 \end{align}
\]</span>所以弹簧势可以表述为： <span class="math display">\[\begin{align}
E(\textbf{x})=\frac{1}{2}\sum_{i=1}^{s}k_i \underset{\left\|
\textbf{d}_i  \right\|=r}{\min}\left\|  \textbf{p}_{i_1}-\textbf{p}_{i_2}-\textbf{d}_i
\right\|^2 =\underset{\left\|
\textbf{d}_i  \right\|=r}{\min}\frac{1}{2}\textbf{x}^T\textbf{L}\textbf{x}-\textbf{x}^T\textbf{J}\textbf{d}
\end{align}
\]</span>其中 <span class="math inline">\(s\)</span> 为弹簧数量，矩阵
<span class="math inline">\(\textbf{L}\in
\mathbb{R}^{3m\times3m},\textbf{J}\in \mathbb{R}^{3m\times3s}\)</span>
定义如下： <span class="math display">\[\begin{align}\textbf{L}=\left(\sum_{i=1}^{s}k_i\textbf{A}_i\textbf{A}_i^T\right)\otimes
\textbf{I}_3,
\textbf{J}=\left(\sum_{i=1}^{s}k_i\textbf{A}_i\textbf{S}_i^T\right)\otimes
\textbf{I}_3 \end{align}
\]</span>其中 <span class="math inline">\(\textbf{A}_i \in
\textbf{R}^m\)</span>
是第i个弹簧的入射向量，$<em>{i,i_1}=1,</em>{i,i_2}=-1 <span class="math inline">\(，其他为0。\)</span>_i ^s$ 为第i个弹簧的指示向量，
<span class="math inline">\(\textbf{s}_{i,i}=1\)</span>，其他为0。将他们带入我们需要求解的最小化问题中可以得到：
<span class="math display">\[\begin{align} \underset{
\textbf{x}\in\textbf{R}^{3m},
\left\|\textbf{d}_i  \right\|=r}{\min}\frac{1}{2}\textbf{x}^T\textbf{L}\textbf{x}-\textbf{x}^T\textbf{J}\textbf{d}+\textbf{x}^T\textbf{y}
\end{align}
\]</span>最小化问题（10）可以用块下降方法求解。先固定 <span class="math inline">\(\textbf{x}\)</span> ，求得最优的 <span class="math inline">\(\textbf{d}\)</span> ，再固定 <span class="math inline">\(\textbf{d}\)</span> ，求得最优的 <span class="math inline">\(\textbf{x}\)</span>
，如此反复直到到达最大迭代次数。值得注意的是，在每一步迭代 <span class="math inline">\(\textbf{x}\)</span> 时可以使用牛顿法下降，而迭代
<span class="math inline">\(\textbf{d}\)</span> 时因为（7），可以直接将
<span class="math inline">\(\textbf{d}_i=r(\textbf{p}_{i_1}-\textbf{p}_{i_2})/\left\|
\textbf{p}_{i_1}-\textbf{p}_{i_2} \right\|\)</span>代入，加速计算。</p>
<h2 id="implementation">3.Implementation</h2>
<p>这部分没什么意思我们跳过。</p>
<h2 id="result">4.Result</h2>
<p>重新调整了界面使得三种算法，显式欧拉，隐式欧拉和快速隐式欧拉，可以方便比较。并且加入了新的变量steps，代表每一小步的迭代次数。用fps大小来评定算法的效率。</p>
<p>显式欧拉法效率最高，在steps=1000时，fps依旧保持在最大的60。
 <img src="/%E9%A1%B9%E7%9B%AE/project-pku-vcl-2023-final-project/explicit.png" alt="explicit">
隐式欧拉法效率很低，在steps=39时，fps就只有20了，当steps达到150时实时仿真就崩溃了。
 <img src="/%E9%A1%B9%E7%9B%AE/project-pku-vcl-2023-final-project/implicit_1.png" alt="implicit">  <img src="/%E9%A1%B9%E7%9B%AE/project-pku-vcl-2023-final-project/implicit_2.png" alt="implicit">
我们实现的快速隐式欧拉法相较于传统的隐式欧拉法，效率会快上数倍，steps在150时，fps有39，当steps达到500时，fps还能保持在15，steps达到最大的1000时仿真依旧没有崩溃。
 <img src="/%E9%A1%B9%E7%9B%AE/project-pku-vcl-2023-final-project/fast_implicit_1.png" alt="fast_implicit">  <img src="/%E9%A1%B9%E7%9B%AE/project-pku-vcl-2023-final-project/fast_implicit_2.png" alt="fast_implicit">  <img src="/%E9%A1%B9%E7%9B%AE/project-pku-vcl-2023-final-project/fast_implicit_3.png" alt="fast_implicit"></p>
]]></content>
      <categories>
        <category>项目</category>
      </categories>
      <tags>
        <tag>项目</tag>
        <tag>C++</tag>
        <tag>物理仿真</tag>
      </tags>
  </entry>
</search>
